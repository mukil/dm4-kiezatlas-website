function RESTClient(a){function b(b,c,d,e,f,g,h,i){var j={method:b,uri:c,headers:f||{},data:d};a&&a.on_send_request&&a.on_send_request(j);var k,l,m=void 0!=e,n=j.headers["Content-Type"]||"application/json";if("application/json"==n&&(d=JSON.stringify(d)),g=g||"json",$.ajax({type:b,url:j.uri,contentType:n,headers:j.headers,data:d,dataType:g,processData:!1,async:m}).done(function(a,b,c){e&&e(a),l=a}).fail(function(c,d,e){var f={content_type:c.getResponseHeader("Content-Type"),content:c.responseText,status_code:c.status,status_text:c.statusText};console.error("Server response:",f);var g=h&&0==h(f);throw!g&&a&&a.on_request_error&&a.on_request_error(f),"RESTClientError: "+b+" request failed ("+d+": "+e+")"}).always(function(a,b){k=b}),!m&&"success"==k){var o=l.directives;return o&&a&&a.process_directives&&a.process_directives(o,i),l}}function c(a){function b(a,b){null!=b&&void 0!=b&&c.params.push(a+"="+encodeURIComponent(b))}var c=this;this.params=[];for(var d in a)b(d,a[d]);this.add=function(a,c){b(a,c)},this.add_list=function(a,c){if(c)for(var d=0;d<c.length;d++)b(a,c[d])}}this.get_topic_by_id=function(a,d,e){var f=new c({include_childs:d,include_assoc_childs:e});return b("GET","/core/topic/"+a+f)},this.get_topic_by_uri=function(a,d,e){var f=new c({include_childs:d,include_assoc_childs:e});return b("GET","/core/topic/by_uri/"+a+f)},this.get_topic_by_value=function(a,d,e){var f=new c({include_childs:e});return b("GET","/core/topic/by_value/"+a+"/"+encodeURIComponent(d)+f)},this.get_topics_by_value=function(a,d,e){var f=new c({include_childs:e});return b("GET","/core/topic/multi/by_value/"+a+"/"+encodeURIComponent(d)+f)},this.get_topics=function(a,d,e){var f=new c({include_childs:d}),g=b("GET","/core/topic/by_type/"+a+f);return e&&this.sort_topics(g),g},this.get_topic_related_topics=function(a,d,e){var f=new c(d),g=b("GET","/core/topic/"+a+"/related_topics"+f);return e&&this.sort_topics(g),g},this.search_topics=function(a,d){var e=new c({search:a,field:d});return b("GET","/core/topic"+e)},this.create_topic=function(a){return b("POST","/core/topic",a)},this.update_topic=function(a){return b("PUT","/core/topic/"+a.id,a)},this.delete_topic=function(a){return b("DELETE","/core/topic/"+a)},this.get_association_by_id=function(a,d){var e=new c({include_childs:d});return b("GET","/core/association/"+a+e)},this.get_association=function(a,d,e,f,g,h){var i=new c({include_childs:h});return b("GET","/core/association/"+a+"/"+d+"/"+e+"/"+f+"/"+g+i)},this.get_associations=function(a,c,d){return b("GET","/core/association/multiple/"+a+"/"+c+"/"+(d||""))},this.get_association_related_topics=function(a,d,e){var f=new c(d),g=b("GET","/core/association/"+a+"/related_topics"+f);return e&&this.sort_topics(g),g},this.create_association=function(a){return b("POST","/core/association",a)},this.update_association=function(a,c){return b("PUT","/core/association/"+a.id,a,void 0,void 0,void 0,void 0,c)},this.delete_association=function(a){return b("DELETE","/core/association/"+a)},this.get_topic_type=function(a){return b("GET","/core/topictype/"+a)},this.get_topic_type_implicitly=function(a){return b("GET","/core/topictype/topic/"+a)},this.get_all_topic_types=function(a){b("GET","/core/topictype/all",void 0,a)},this.create_topic_type=function(a){return b("POST","/core/topictype",a)},this.update_topic_type=function(a){return b("PUT","/core/topictype",a)},this.delete_topic_type=function(a){return b("DELETE","/core/topictype/"+a)},this.get_association_type=function(a){return b("GET","/core/assoctype/"+a)},this.get_association_type_implicitly=function(a){return b("GET","/core/assoctype/assoc/"+a)},this.get_all_association_types=function(a){b("GET","/core/assoctype/all",void 0,a)},this.create_association_type=function(a){return b("POST","/core/assoctype",a)},this.update_association_type=function(a){return b("PUT","/core/assoctype",a)},this.delete_association_type=function(a){return b("DELETE","/core/assoctype/"+a)},this.create_role_type=function(a){return b("POST","/core/roletype",a)},this.get_plugins=function(){return b("GET","/core/plugin")},this.request=function(a,c,d,e,f,g,h){return b(a,c,d,e,f,g,h)},this.queryParams=function(a){return new c(a)},this.sort_topics=function(a){a.sort(function(a,b){function c(a,b){return a<b?-1:a==b?0:1}return a.type_uri!=b.type_uri?c(a.type_uri,b.type_uri):"string"==typeof a.value?c(a.value.toLowerCase(),b.value.toLowerCase()):c(a.value,b.value)})},c.prototype.toString=function(){var a=this.params.join("&");return a&&(a="?"+a),a}}var js={find:function(a,b){for(var c,d=0;c=a[d];){if(b(c))return c;d++}},filter:function(a,b){for(var c,d=0;c=a[d];)b(c)?d++:a.splice(d,1)},delete:function(a,b){this.filter(a,function(a){return!b(a)})},keys:function(a){var b=[];for(var c in a)b.push(c);return b},size:function(a){var b=0;for(var c in a)b++;return b},inspect:function(a){var b=[],c=[];for(var d in a)"function"==typeof a[d]?c.push(d):b.push(d);b.sort(),c.sort();for(var d,e="\n",f=0;d=b[f];f++)e+=d+": "+a[d]+"\n";for(var d,f=0;d=c[f];f++)e+="function "+d+"()\n";return e},stringify:function(a){function b(a,e,f){switch(typeof a){case"string":return void(d+='"'+a+'" (string)');case"number":return void(d+=a+" (number)");case"boolean":return void(d+=a+" (boolean)");case"object":if(d+=(js.is_array(a)?"[":"{")+"\n",e<c)for(var g in a)"function"!=typeof a[g]&&(d+=f+"\t"+g+": ",b(a[g],e+1,f+"\t"),d+="\n");else d+=f+"\t"+(js.is_array(a)?"ARRAY":"OBJECT")+" NOT SHOWN (max "+c+" levels)\n";return void(d+=f+(js.is_array(a)?"]":"}"));case"function":return;case"undefined":return void(d+="undefined");default:return void(d+="UNKNOWN ("+typeof a+")")}}var c=10,d="";return b(a,0,""),d},contains:function(a,b){if(!a)return!1;for(var c=0;c<a.length;c++)if(a[c]==b)return!0;return!1},includes:function(a,b){for(var c,d=0;c=a[d];d++)if(b(c))return!0;return!1},substract:function(a,b,c){js.filter(a,function(a){return!js.includes(b,function(b){return c(a,b)})})},copy:function(a,b){for(var c in a)b[c]=a[c]},clone:function(a){try{return JSON.parse(JSON.stringify(a))}catch(a){alert("ERROR (clone): "+JSON.stringify(a))}},is_array:function(a){return"[object Array]"==Object.prototype.toString.call(a)},extend:function(a,b){b.call(a)},class_name:function(a){return a.__proto__.constructor.name},round:function(a,b){var c=Math.pow(10,b);return Math.round(c*a)/c},begins_with:function(a,b){return 0==a.indexOf(b)},render_text:function(a){return a.replace(/\n/g,"<br>")},strip_html:function(a){return a.replace(/<.*?>/g,"")},truncate:function(a,b){if(!a.length||a.length<=b)return a;var c=a.lastIndexOf(" ",b);return a.substr(0,c>=0?c:b)+" ..."},filename:function(a){return a.match(/.*\/(.*)/),RegExp.$1},filename_ext:function(a){return a.substr(a.lastIndexOf(".")+1)},to_id:function(a){return a=a.toLowerCase(),a=a.replace(/ /g,"-")},format_date:function(a){return a?$.datepicker.formatDate("D, M d, yy",new Date(a)):""},format_timestamp:function(a){return new Date(a).toLocaleString()},format_file_size:function(a){function b(){var b=Math.max(d-1,0);return js.round(a,b)+" "+c[d]}for(var c=["bytes","KB","MB","GB"],d=0;d<=2;d++){if(a<1024)return b();a/=1024}return b()},absolute_http_url:function(a){return js.begins_with(a,"http://")||js.begins_with(a,"https://")?a:"http://"+a},TextWrapper:function(a,b,c,d){function e(){function e(a,c){l=d.measureText(c).width,a?j(c):o+m.width+l<=b?i(c):j(c)}function i(a){n+=m.char+a,o+=m.width+l}function j(a){n&&g.push(n),n=a,o=l}function k(){return{char:n?" ":"",width:n?p:0}}for(var l,m,n="",o=0,p=d.measureText(" ").width,q=a.split(/([ \n])/),r=0;r<q.length;r+=2)m=k(),e("\n"==q[r-1],q[r]),o>h&&(h=o);g.push(n),f=g.length*c}var f,g=[],h=0;a.split||(a=a.toString()),e(),this.draw=function(a,b,d){for(var e,f=b,h=0;e=g[h];h++)d.fillText(e,a,f),f+=c},this.get_size=function(){return{width:h,height:f}},this.get_line_height=function(){return c}},is_local_connection:function(){var a=location.hostname;return"localhost"==a||"127.0.0.1"==a},set_cookie:function(a,b){document.cookie=a+"="+b+";path=/"},get_cookie:function(a){if(document.cookie.match(new RegExp("\\b"+a+"=(\\w*)")))return RegExp.$1},remove_cookie:function(a){var b=-1,c=new Date;c.setTime(c.getTime()+24*b*60*60*1e3),document.cookie=a+"=;path=/;expires="+c.toGMTString()}};